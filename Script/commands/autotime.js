const schedule = require('node-schedule');
const moment = require('moment-timezone');
const chalk = require('chalk');

module.exports.config = {
 name: 'autosent',
 version: '10.0.4',
 hasPermssion: 0,
 credits: 'Priyansh Rajput (Modified by SUJON)',
 description: 'Automatically sends funny-love mixed messages based on time (BD Time)',
 commandCategory: 'group',
 usages: '',
 cooldowns: 3
};

const messages = [
 { time: '12:00 AM', message: '⌚ সময়: ১২:০০ AM,\n “উচ্চারন:-আল্লাহুম্মা বিসমিকা আমুতু ওয়া আহ্ইয়া,\n⋆✦⋆⎯⎯⎯⎯⎯⎯⎯⎯⎯⋆✦⋆\nহে আল্লাহ! তোমার নামে আমি শয়ন করছি এবং তোমারই দয়ায় আমি পুনর্জাগ্রত হব।”' },
 { time: '1:00 AM', message: '⌚ সময়: ১:০০ AM,\n “উচ্চারন:- লা ইলাহা ইল্লা আংতা, সুবহানাকা ইন্নি কুংতু মিনাজ জ্বলিমিন।\n⋆✦⋆⎯⎯⎯⎯⎯⎯⎯⎯⎯⋆✦⋆\nঅর্থ: ‘তুমি ছাড়া সত্য কোনো উপাস্য নেই; তুমি পুতঃপবিত্র, নিশ্চয় আমি জালিমদের দলভুক্ত’ (সুরা আম্বিয়া: ৮৭)।”' },
 { time: '2:00 AM', message: '⌚ সময়: ২:০০ AM,\n “উচ্চারণ : ‘আতুবু ইলাল্লাহি মিম্মা আজনাবতু,\n⋆✦⋆⎯⎯⎯⎯⎯⎯⎯⎯⎯⋆✦⋆\nঅর্থ : (হে আল্লাহ!) আমি যে গোনাহ করেছি; তা থেকে আল্লাহর কাছে ক্ষমা প্রার্থনা করছি।”' },
 { time: '3:00 AM', message: '⌚ সময়: ৩:০০ AM,\n “রাত ৩টা মানে গভীর ঘুম। আল্লাহ সবাই কে মাফ করে দিন!”' },
 { time: '4:00 AM', message: '⌚ সময়: ৪:০০ AM,\n “উচ্চারন:- মা খালাক্বতুল জ্বিন্না অল ইনসা ইল্লা লি ইয়াবুদূন,\n⋆✦⋆⎯⎯⎯⎯⎯⎯⎯⎯⎯⋆✦⋆\nঅর্থ:- আল্লাহ জ্বীন ও মানব কে শুধু তার ইবাদত এর জন্য সৃষ্টি করছেন!”' },
 { time: '5:00 AM', message: '⌚ সময়: ৫:০০ AM,\n “উচ্চারন:- আস সালাতু খাইরুম মিনান্নাওম,\n⋆✦⋆⎯⎯⎯⎯⎯⎯⎯⎯⎯⋆✦⋆,\n অর্থ :- ঘুম হতে নামাজ উত্তম!”' },
 { time: '6:00 AM', message: '⌚ সময়: ৬:০০ AM,\n “বিসমিল্লাহির রাহমানির রাহিম,\n⋆✦⋆⎯⎯⎯⎯⎯⎯⎯⎯⎯⋆✦⋆\nঅর্থ:-দয়াময় পরুম দয়ালু আল্লাহ নামে!”' },
 { time: '7:00 AM', message: '⌚ সময়: ৭:০০ AM,\n “উচ্চারন:- আলহামদুলিল্লাহ,\n⋆✦⋆⎯⎯⎯⎯⎯⎯⎯⎯⎯⋆✦⋆\nঅর্থ :-প্রশংসা একমাত্র আল্লাহর জন্য!”' },
 { time: '8:00 AM', message: '⌚ সময়: ৮:০০ AM,\n “উচ্চারন :- আল্লাহুম্মাগ ফিরলী ওয়ালিল মু’মিনিনা ওয়াল মু’মিনাতি, ওয়াল মুসলিমিনা ওয়াল মুসলিমাতি,\n⋆✦⋆⎯⎯⎯⎯⎯⎯⎯⎯⎯⋆✦⋆\nঅর্থঃ হে আল্লাহ্ তুমি আমার ও সমস্ত মু’মিন নর-নারীর এবং সমস্ত মুসলমান পুরুষ ও স্ত্রীলোকের পাপ সমূহ মোচন করে দাও!”' },
 { time: '9:00 AM', message: '⌚ সময়: ৯:০০ AM,\n “উচ্চারন :- রাব্বানা আ’তিনা ফিদ্দুনিয়া হাছানাতাঁও ওয়াফিল আখিরাতি হাছানাতাঁও ওয়াক্বিনা আজাবান্নার,\n⋆✦⋆⎯⎯⎯⎯⎯⎯⎯⎯⎯⋆✦⋆\nঅর্থঃ হে আল্লাহ্ তুমি আমাকে ইহকালীন যাবতীয় সুখ-শান্তি ও পরকালীন যাবতীয় সুখ-শান্তি প্রদান কর। আর দোজখের আগুন থেকে আমাকে রক্ষা কর!”' },
 { time: '10:00 AM', message: '⌚ সময়: ১০:০০ AM,\n “উচ্চারন:- রাব্বাবা যালামনা আনফুসানা ওয়া ইল্লাম তাগফির্লানা ওয়াতার হামনা লানা কুনান্না মিনাল খা’সিরিন,\n⋆✦⋆⎯⎯⎯⎯⎯⎯⎯⎯⎯⋆✦⋆\nঅর্থঃ হে আল্লাহ্, আমি আমার নিজের উপর জুলুম করে ফেলেছি। এখন তুমি যদি ক্ষমা ও রহম না কর, তাহলে আমি ধ্বংস হয়ে যাব!”' },
 { time: '11:00 AM', message: '⌚ সময়: ১১:০০ AM,\n “উচ্চারন :- রাব্বানা আ’তিনা ফিদ্দুনিয়া হাছানাতাঁও ওয়াফিল আখিরাতি হাছানাতাঁও ওয়াক্বিনা আজাবান্নার,\n⋆✦⋆⎯⎯⎯⎯⎯⎯⎯⎯⎯⋆✦⋆\nঅর্থঃ হে আল্লাহ্ তুমি আমাকে ইহকালীন যাবতীয় সুখ-শান্তি ও পরকালীন যাবতীয় সুখ-শান্তি প্রদান কর। আর দোজখের আগুন থেকে আমাকে রক্ষা কর!”' },
 { time: '12:00 PM', message: '⌚ সময়: ১২:০০ PM,\n “উচ্চারন:- মিনহা খালাকনাকুম‘ওয়া ফিহা নুঈদুকুম’ ওয়া মিনহা নুখরিজুকুম তারাতান উখরা,\n⋆✦⋆⎯⎯⎯⎯⎯⎯⎯⎯⎯⋆✦⋆\nঅর্থ:- এই মাটি দিয়া আমাদেরকে সৃষ্টি করছে এই মাটির ভিতরে আমাদেরকে ফিরিয়ে আনবে এই মাটি দিয়ে আমাদেরকে পুনরায় সৃষ্টি করবে!”' },
 { time: '1:00 PM', message: '⌚ সময়: ১:০০ PM,\n “যোহরের সালাত আদায় করে নাও!”' },
 { time: '2:00 PM', message: '⌚ সময়: ২:০০ PM,\n “উচ্চারন:- আল্লাহুম্মা ইন্নী আসআলুকাল জান্নাতা ওয়াআউজুবিকা মিনান্না-র,\n⋆✦⋆⎯⎯⎯⎯⎯⎯⎯⎯⎯⋆✦⋆\nঅর্থ: ‘হে আল্লাহ! আমি আপনার কাছে জান্নাত চাই এবং জাহান্নাম থেকে আপনার কাছে আশ্রয় চাই।”' },
 { time: '3:00 PM', message: '⌚ সময়: ৩:০০ PM,\n “উচ্চারন:- আলহামদুলিল্লাহ,\n⋆✦⋆⎯⎯⎯⎯⎯⎯⎯⎯⎯⋆✦⋆\nঅর্থ :-সকল প্রশংসা একমাত্র আল্লাহর জন্য!”' },
 { time: '4:00 PM', message: '⌚ সময়: ৪:০০ PM,\n “উচ্চারন:- লা ইলাহা ইল্লা আন্তা সুবহানাকা ইন্নি কুনতু মিনাজ্ জালিমীন,\n⋆✦⋆⎯⎯⎯⎯⎯⎯⎯⎯⎯⋆✦⋆\nঅর্থ:- আল্লাহ ব্যতীত আর কোনো উপাস্য নেই। আমি আল্লাহর পবিত্রতা ঘোষণা করছি। অবশ্যই আমি পাপী। (সূরা: আল আম্বিয়া, আয়াত: ৮৭)!”' },
 { time: '5:00 PM', message: '⌚ সময়: ৫:০০ PM,\n “উচ্চারন :- আল্লাহুম্মাগ ফিরলী ওয়ালিল মু’মিনিনা ওয়াল মু’মিনাতি, ওয়াল মুসলিমিনা ওয়াল মুসলিমাতি,\n⋆✦⋆⎯⎯⎯⎯⎯⎯⎯⎯⎯⋆✦⋆\nঅর্থঃ হে আল্লাহ্ তুমি আমার ও সমস্ত মু’মিন নর-নারীর এবং সমস্ত মুসলমান পুরুষ ও স্ত্রীলোকের পাপ সমূহ মোচন করে দাও!”' },
 { time: '6:00 PM', message: '⌚ সময়: ৬:০০ PM,\n “এখন সময় বিকাল ৬ টা PM!”' },
 { time: '7:00 PM', message: '⌚ সময়: ৭:০০ PM,\n “মাগরিবের সালাতের টাইম হয়েছে!”' },
 { time: '8:00 PM', message: '⌚ সময়: ৮:০০ PM,\n “উচ্চারন:- লা-ইলা-হা ইল্লাল্লাহু-মুহাম্মাদুর রাসূলুল্লাহ,\n⋆✦⋆⎯⎯⎯⎯⎯⎯⎯⎯⎯⋆✦⋆\nঅর্থ:- আল্লাহ ব্যতীত অন্য কোন উপাস্য নাই, মুহাম্মদ (সঃ) আল্লাহর রাসূল!”' },
 { time: '9:00 PM', message: '⌚ সময়: ৯:০০ PM,\n “পড়াশোনা করলে আগে বই পড়ো তারপর ফোন চালাও!”' },
 { time: '10:00 PM', message: '⌚ সময়: ১০:০০ PM,\n “রাত ১০ টা বেজে গেছে !”' },
 { time: '11:00 PM', message: '⌚ সময়: ১১:০০ PM,\n “উচ্চারন:- মা খালাক্বতুল জ্বিন্না অল ইনসা ইল্লা লি ইয়াবুদূন,\n⋆✦⋆⎯⎯⎯⎯⎯⎯⎯⎯⎯⋆✦⋆\nঅর্থ:- আল্লাহ জ্বীন ও মানব কে শুধু তার ইবাদত এর জন্য সৃষ্টি করছেন!”' },
];

module.exports.onLoad = ({ api }) => {
 console.log(chalk.green.bold('✅ AutoSent Funny-Love Module Loaded (BD Time)'));

 messages.forEach(({ time, message }) => {
   const [hour, minute, period] = time.split(/[: ]/);
   let hour24 = parseInt(hour);
   if (period === 'PM' && hour !== '12') hour24 += 12;
   if (period === 'AM' && hour === '12') hour24 = 0;

   const rule = new schedule.RecurrenceRule();
   rule.tz = 'Asia/Dhaka';
   rule.hour = hour24;
   rule.minute = parseInt(minute);

   schedule.scheduleJob(rule, () => {
     if (!global.data?.allThreadID) return;
     global.data.allThreadID.forEach(threadID => {
       api.sendMessage(message, threadID, (err) => {
         if (err) console.error(`❌ Error sending message to ${threadID}:`, err);
       });
     });
   });
 });

};

module.exports.run = () => {};

